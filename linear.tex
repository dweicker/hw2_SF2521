The shallow water equation can be written in quasilinear form as \begin{align*}
u_t + f'(u) u_x = 0
\end{align*}
where $ u = (h,hv)^T $,
\begin{align*}
f'(u) = \begin{pmatrix}
0 & 1 \\
-(\frac{u_2}{u_1})^2 + gu_1 & 2 (\frac{u_2}{u_1})
\end{pmatrix}
\end{align*}
and 
\begin{align*}
q(x,0) &= \begin{pmatrix}
H + \epsilon e^{-(x-L/2)^2/w^2} \\
0
\end{pmatrix} 
\end{align*}
Now, to make this system linear we must simply pick a constant state $(h_0,v_0)$ which is consistent with the boundary and initial conditions. We choose $(h_0,v_0)$ at $x=0$ and $t=0$. We can now compute $(h_0,v_0)$ using the initial condition. We get $(h_0,v_0) \approx (1,0)$. Thus we have 
\begin{align*}
f'(u) = \begin{pmatrix}
0 & 1 \\
g & 0
\end{pmatrix} = \begin{pmatrix}
0 & 1 \\
9.61 & 0
\end{pmatrix}
\end{align*}
We can see easily $f'(u)$ has eigenvalues $\lambda_{1,2} = \pm \sqrt{9.61} = \pm 3.1$ which are real. It also has a full set of eigenvectors i.e. $(1,3.1)^T$ and $(-1,3.1)$. This together confirm that the linear problem is hyperbolic. We also know that the wave speeds are the eigenvalues, so we have wave speeds $\pm \sqrt{9.61}$

\subsection{Analytical Solution}
We have the PDE, 
\begin{align*}
q_t + f'(u) q_x = 0
\end{align*}
which we have shown can be written as 
\begin{align*}
q_t + V D V^{-1} q_x &= 0 \\
\implies V^{-1} q_t + D V^{-1} q_x &= 0
\end{align*}
where 
\begin{align*}
 V = \begin{pmatrix}
1 & -1 \\
3.1 & 3.1
\end{pmatrix}, D= \begin{pmatrix}
3.1 & 0 \\
0 & -3.1
\end{pmatrix},  \text{and} V^{-1} = \begin{pmatrix}
0.5 & 0.1613 \\
-0.5 & 0.1613
\end{pmatrix}
\end{align*} and initial condition
\begin{align*}
q(x,0) &= \begin{pmatrix}
H + \epsilon e^{-(x-L/2)^2/w^2} \\
0
\end{pmatrix} 
\end{align*}
Now, defining a new variable $r = V^{-1} q$ we have the decoupled system of equations
\begin{align*}
r_t + Dr_x = 0
\end{align*}
and 
\begin{align*}
r(x,0) = V^{-1} q(x,0) = \frac{1}{2} \begin{pmatrix}
H + \epsilon e^{-(x-L/2)^2/w^2} \\
-H - \epsilon e^{-(x-L/2)^2/w^2}
\end{pmatrix} 
\end{align*}
From Lavengen, we know the solutions of this system are 
\begin{align*}
	r_1(x,t)&=r_1(x+\lambda_1t,0)=\frac{1}{2} (H + \epsilon e^{-(x+3.1t-L/2)^2/w^2}) \\
	\text{and} \quad r_2(x,t)&=r_2(x+\lambda_2t,0)= \frac{1}{2}(-H - \epsilon e^{-(x-3.1t-L/2)^2/w^2})
\end{align*} 
Finally switching back to $q$, we get 
\begin{align*}
q(x,t) = Vr(x,t) &= \frac{1}{2} \begin{pmatrix}
H + \epsilon e^{-(x+3.1t-L/2)^2/w^2} +H + \epsilon e^{-(x-3.1t-L/2)^2/w^2} \\
3.1(H + \epsilon e^{-(x+3.1t-L/2)^2/w^2} -H - \epsilon e^{-(x-3.1t-L/2)^2/w^2})
\end{pmatrix} \\
&= \frac{1}{2}\begin{pmatrix}
 2H + \epsilon e^{-(x+3.1t-L/2)^2/w^2} + \epsilon e^{-(x-3.1t-L/2)^2/w^2} \\
3.1( \epsilon e^{-(x+3.1t-L/2)^2/w^2} - \epsilon e^{-(x-3.1t-L/2)^2/w^2})
\end{pmatrix}
\end{align*} 
Now, simply plugging in $t=1$ we get
\begin{align*}
q(x,1) = \frac{1}{2}\begin{pmatrix}
 2H + \epsilon e^{-(x+3.1-L/2)^2/w^2} + \epsilon e^{-(x-3.1-L/2)^2/w^2} \\
3.1( \epsilon e^{-(x+3.1-L/2)^2/w^2} - \epsilon e^{-(x-3.1-L/2)^2/w^2})
\end{pmatrix}
\end{align*}

\subsection{Numerical Solution of the Linear Problem}